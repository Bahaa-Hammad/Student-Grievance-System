<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Student Dashboard</title>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
        <link href="css.css" rel="stylesheet"> 

    </head>
    
    <body>
        <header>
            <div class="d-flex justify-content-between align-items-start p-4">
                <h4 class="student-name">[Faculty Name]</h4>
                <img src="psu.jpg" alt="PSU Logo" class="logo">
            </div>

            <nav>
                <a href="FacultyDashboard.html">Home</a>
                <a href="#">Profile</a>
                <a href="Login.html">Logout</a>
            </nav>
        </header>



    <section class="grievance-section">
    <div class="container mt-5">
        <h2 class="text-center mb-4">Staff & Faculty: Grievance Review</h2>
        <div class="filter-options">
            <label for="category">Category:</label>
            <select id="category">
                <option value="all">All</option>
                <option value="academic">Academic</option>
                <option value="administrative">Administrative</option>
                <option value="other">Other</option>
            </select>

            <label for="sort">Sort by:</label>
            <select id="sort">
                <option value="date">Date</option>
                <option value="type">Type</option>
                <option value="status">Status</option>
            </select>
        </div>

        <!-- List of Grievances for Review -->
        <table class="table">
            <thead>
                <tr>
                    <th>Student_Name</th>
                    <th>Grievance_Type</th>
                    <th>Date_Submitted</th>
                    <th>Status</th>
                    <th>Course / Department</th>
                    <th>Details</th>
                    <th>Comment</th>
                    <th> </th>
                </tr>
            </thead>
            <tbody>
                <!-- Sample Row - This would typically be filled dynamically -->
                <tr>
                    <td>XXXXXXXXX</td>
                    <td>Grading Issue</td>
                    <td>01/01/2023</td>
                    <td><select name="status" id="status">
                        <option value="Under progress">Under progress</option>
                        <option value="Resolved">Resolved</option>
                      </select>
                    </td>
                    <td>CS101 - Intro to Programming</td>
                    <td><a href="FacultyGrievancesDetails.html">View Details</a></td>
                    <td><textarea id="w3review" name="w3review" rows="1" cols="14"></textarea></td>
                    <td><button type="submit" class="submit">Submit</button></td>
                </tr>
                <tr>
                    <td>XXXXXXXXX</td>
                    <td>Grading Issue</td>
                    <td>01/01/2023</td>
                    <td><select name="status" id="status">
                        <option value="in_progress">Under progress</option>
                        <option value="resolved">Resolved</option>
                      </select>
                    </td>
                    <td>CS101 - Intro to Programming</td>
                    <td><a href="FacultyGrievancesDetails.html">View Details</a></td>
                    <td><textarea id="w3review" name="w3review" rows="1" cols="14"></textarea></td>
                    <td><button type="submit" class="submit">Submit</button></td>
                </tr>
                <tr>
                    <td>XXXXXXXXX</td>
                    <td>Grading Issue</td>
                    <td>01/01/2023</td>
                    <td><select name="status" id="status">
                        <option value="in_progress">Under progress</option>
                        <option value="resolved">Resolved</option>
                      </select>
                    </td>
                    <td>CS101 - Intro to Programming</td>
                    <td><a href="FacultyGrievancesDetails.html">View Details</a></td>
                    <td><textarea id="w3review" name="w3review" rows="1" cols="14"></textarea></td>
                    <td><button type="submit" class="submit">Submit</button></td>
                </tr>
                <tr>
                    <td>XXXXXXXXX</td>
                    <td>Grading Issue</td>
                    <td>01/01/2023</td>
                    <td><select name="status" id="status">
                        <option value="in_progress">Under progress</option>
                        <option value="resolved">Resolved</option>
                      </select>
                    </td>
                    <td>CS101 - Intro to Programming</td>
                    <td><a href="FacultyGrievancesDetails.html">View Details</a></td>
                    <td><textarea id="w3review" name="w3review" rows="1" cols="14"></textarea></td>
                    <td><button type="submit" class="submit">Submit</button></td>
                </tr>
                <!-- More rows as necessary -->
            </tbody>
        </table>

    </div>
</section>
<script>
   // Function to handle the submission of the faculty response
function submitResponse(event, row) {
  // Prevent the form from submitting the traditional way
  event.preventDefault();

  // Retrieve the input values from the row
  const studentName = row.querySelector('td:nth-child(1)').innerText;
  const grievanceType = row.querySelector('td:nth-child(2)').innerText;
  const dateSubmitted = row.querySelector('td:nth-child(3)').innerText;
  const status = row.querySelector('select[name="status"]').value;
  const courseDepartment = row.querySelector('td:nth-child(5)').innerText; // Changed from 'course' to 'courseDepartment'
  const comment = row.querySelector('textarea[name="w3review"]').value;

  // Create an object with the data
  const response = {
    studentName,
    grievanceType,
    dateSubmitted,
    status,
    courseDepartment, // Changed to match the table column name
    comment
  };


  
      // Retrieve the existing notifications array from localStorage, or initialize an empty array if it doesn't exist
      const notifications = JSON.parse(localStorage.getItem('notifications')) || [];
      notifications.push(response);
  
      // Save the updated notifications array to localStorage
      localStorage.setItem('notifications', JSON.stringify(notifications));
  
      // Optionally, add feedback for the faculty member here, like a message saying the submission was successful
      alert('Response submitted successfully.');
    }
  
    // Attach the submit event to all submit buttons
    document.addEventListener('DOMContentLoaded', () => {
      const submitButtons = document.querySelectorAll('.submit');
      submitButtons.forEach(button => {
        button.addEventListener('click', function(event) {
          const row = button.closest('tr');
          submitResponse(event, row);
        });
      });
    });
  </script>
</body>
</html>
